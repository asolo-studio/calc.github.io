function InitCalculator(){function t(){function t(){s=d.scrollTop()+window.innerHeight,i=i=r.offset().top,l=i-n,0==c&&s>=n&&s<=i&&l>=200?(o.attr("class","TotalCost-Container TotalCost-Container-Fixed"),c=!0):c&&(s<=n||s>=i)&&(o.attr("class","TotalCost-Container"),c=!1),s=null}var o=$(".TotalCost-Container"),e=$(".TotalCost-Container-Spacer"),a=o.height(),r=$("#hrTotalCost"),n=$(".Progressbar-Container").offset().top+300,i=r.offset().top,l=n-i,d=$(window),s=null,c=!1;e.height(a),t(),d.scroll(t),d.resize(t),$(document).bind("change",t)}function o(){function t(){y=_w.scrollTop()+a,posBot=r.offset().top,posDist=posBot-posTop,0==isFixed&&y>=posTop&&y<=posBot&&posDist>=600?(o.attr("class","Progressbar-Container Progressbar-Container-Fixed"),isFixed=!0):isFixed&&(y<=posTop||y>=posBot)&&(o.attr("class","Progressbar-Container"),isFixed=!1),y=null}var o=$(".Progressbar-Container"),e=$(".Progressbar-Container-Spacer"),a=o.height(),r=$(".CalculatorFooter");posTop=o.offset().top+a,posBot=r.offset().top-a-20,posDist=posTop-posBot,_w=$(window),y=null,isFixed=!1,e.height(a),t(),_w.scroll(t)}function e(){q=q.ButtonPod(),Y=Y.ButtonPod(),Y.find("#btnSize_Bachelor").attr("data-square-footage",m_MaxSquareFootage[0]),Y.find("#btnSize_1Bedroom").attr("data-square-footage",m_MaxSquareFootage[1]),Y.find("#btnSize_2Bedroom").attr("data-square-footage",m_MaxSquareFootage[2]),Y.find("#btnSize_3Bedroom").attr("data-square-footage",m_MaxSquareFootage[3]),btnNumberOfRooms.ButtonPod(),sldSize_WholeCondo=sldSize_WholeCondo.SliderControl(),sldSize_WholeCondo.disable(),btnClosets=btnClosets.ButtonPod(),btnAccentWalls=btnAccentWalls.ButtonPod(),btnBathrooms=btnBathrooms.ButtonPod(),J=J.ButtonPod(),txtPromoCode.val(""),btnApplyPromoCode.disable();var t=2*m_AccentWall,o=3*m_AccentWall,e=4*m_AccentWall;$("#btnAccentWalls_option1").html(formatCurrency(m_AccentWall)),$("#btnAccentWalls_option2").html(formatCurrency(t)),$("#btnAccentWalls_option3").html(formatCurrency(o)),$("#btnAccentWalls_option4").html(formatCurrency(e));var r=2*m_Closet,n=3*m_Closet,i=4*m_Closet;$("#btnClosets_option1").html(formatCurrency(m_Closet)),$("#btnClosets_option2").html(formatCurrency(r)),$("#btnClosets_option3").html(formatCurrency(n)),$("#btnClosets_option4").html(formatCurrency(i));var l=2*m_Bathroom,d=3*m_Bathroom,s=4*m_Bathroom;$("#btnBathrooms_option1").html(formatCurrency(m_Bathroom)),$("#btnBathrooms_option2").html(formatCurrency(l)),$("#btnBathrooms_option3").html(formatCurrency(d)),$("#btnBathrooms_option4").html(formatCurrency(s));var c=2*m_DoorsTrim,u=3*m_DoorsTrim,m=4*m_DoorsTrim;$("#btnDoors_option1").html(formatCurrency(m_DoorsTrim)),$("#btnDoors_option2").html(formatCurrency(c)),$("#btnDoors_option3").html(formatCurrency(u)),$("#btnDoors_option4").html(formatCurrency(m)),a()}function a(){function t(){var t,o,e,a=null,r=0;Z.length>0&&("whole-condo"==m_mode?(o=questionsContainer_wholeCondo.find(">div[data-type='Question']"),t=tt.add(o.filter(":not(.Hide), [style='display: block;'], [style='display:block'], [style^='opacity']"))):"rooms"==m_mode?(e=questionsContainer_rooms.find(">div[data-type='Question'], div[data-type='Room-Question']"),t=tt.add(e.filter(":not(.Hide), [style='display: block;'], [style='display:block'], [style^='opacity']"))):visibleQuestions0.add(Z.filter(":not(.Hide), [style='display: block;'], [style='display:block'], [style^='opacity']")),t=t.filter(":not([data-optional='true'])"));null!=t&&t.length>0&&("rooms"==m_mode?(a=t.filter("[data-is-complete='true']"),a=a.add(t.filter(":not([data-type='Room-Question'])").find(".Checked:eq(0), [aria-checked='true']:eq(0)"))):a=t.find(".Checked:eq(0), [aria-checked='true']:eq(0)")),a.length==t.length?btnSubmitQuote.fadeIn():btnSubmitQuote.fadeOut(),r=Math.ceil(a.length/t.length*100),r>100&&(r=100),r+="%",d.css("width",r),s.html(r)}function o(){var t,o,e,a=2;"whole-condo"==m_mode?(t=questionsContainer_wholeCondo.find("div[data-type='Question']"),e=t.filter(":not(.Hide), [style='display: block;'], [style^='opacity']")):"roms"==m_mode?(o=questionsContainer_rooms.find("div[data-type='Question']"),e=o.filter(":not(.Hide), [style='display: block;'], [style^='opacity']")):e=Z.filter(":not(.Hide), [style='display: block;'], [style='display:block'], [style^='opacity']"),console.log("--------------------------------"),console.log("** UPDATING "+e.length+" label numbers ("+m_mode+" MODE)"),e.each(function(){console.log("Question #"+a+" ("+$(this).find(">h2").html()+") has "+$(this).find(">h2 >span").length+" label <spans> in it.\n"),$(this).find(">h2 >span").html(a+". "),a++})}function e(){var o=parseInt($("#btnNumberOfRooms").attr("data-selected-index"))+1,e=questionsContainer_rooms.find("div[data-type='Room-Question']");if(e.length<o)for(var a=4+e.length+1,r=e.length+1,n=e.length;n<o;n++){var l=$(roomQuestionTemplate.replace(/ROOMNUM/gi,r));r>1&&"false"==$(roomQuestions[roomQuestions.length-1]).attr("data-is-complete")&&l.addClass("Hide"),roomQuestions.push(l),l=l.RoomControl(function(){i(),t()},roomQuestions),l.find(">h2 span").eq(0).html(a+". "),questionsContainer_rooms.append(l),console.log("set new tooltips for room questions now that it's added to the DOM"),l.find(".tooltip").removeClass("tooltipstered"),console.log("found "+l.find(".tooltip").length+" items to tooltipster"),l.find(".tooltip").tooltipster(),r++,a++}else if(e.length>o)for(var d=e.length;d>o;d--)$(roomQuestions[d-1]).remove(),roomQuestions.pop()}$(document).bind("change",function(){}),txtPromoCode.bind("keyup",function(t){txtPromoCode.val().length>=4?btnApplyPromoCode.enable():btnApplyPromoCode.disable(),13==t.keyCode&&btnApplyPromoCode.trigger("click")}),btnApplyPromoCode.bind("click",function(){var t=txtPromoCode.val().toUpperCase();ValidatePromoCode(t,function(o,e){o?(m_selected_code=e,i(),A.html("Code: "+t),G.addClass("Hide"),K.fadeIn()):(m_selected_code=null,ShowMessage("msgInvalidCode","'"+t+"' is invalid or expired",8e3),txtPromoCode.val("").focus())})}),btnSubmitQuote.bind("click",function(){ShowForm()}),$(".CheckboxContainer h4").bind("click",function(){var t=$(this).parent(),o=t.find(".Checkbox");o.trigger("click")}),checkboxes.bind("keydown",function(t){32!=t.keyCode&&13!=t.keyCode||$(this).trigger("click")}),checkboxes.bind("click",function(){var t=$(this),o=t.attr("aria-checked"),e=t.find("input");"false"==o?(t.hasClass("Radio")?t.attr({"aria-checked":"true",class:"Checkbox Radio Checked"}):(t.attr({"aria-checked":"true",class:"Checkbox Checked"}),i()),e.attr("value","validated")):(t.hasClass("Radio")?t.attr({"aria-checked":"false",class:"Checkbox Radio"}):(t.attr({"aria-checked":"false",class:"Checkbox"}),i()),e.attr("value","false"))}),rdoRefresh.add(rdoColourChange).bind("click",function(){var e=$(this).attr("id");console.log("#"+e),"rdoRefresh"==e?"false"!=rdoColourChange.attr("aria-checked")?(rdoColourChange.attr({"aria-checked":"false",class:"Checkbox Radio"}),rdoColourChange.find("input").attr("value","false")):(rdoRefresh.attr({"aria-checked":"true",class:"Checkbox Checked Radio"}),rdoRefresh.find("input").attr("value","true")):"rdoColourChange"==e&&("false"!=rdoRefresh.attr("aria-checked")?(rdoRefresh.attr({"aria-checked":"false",class:"Checkbox Radio"}),rdoRefresh.find("input").attr("value","false")):(rdoColourChange.attr({"aria-checked":"true",class:"Checkbox Checked Radio"}),rdoColourChange.find("input").attr("value","true"))),M.hasClass("Hide")&&(M.fadeIn(function(){M.removeClass("Hide")}),o(),t()),$(document).change(),i()}),rdoColourConsultation_Yes.add(rdoColourConsultation_No).bind("click",function(){var e=$(this).attr("id");"rdoColourConsultation_Yes"==e?"false"!=rdoColourConsultation_No.attr("aria-checked")?(rdoColourConsultation_No.attr({"aria-checked":"false",class:"Checkbox Radio"}),rdoColourConsultation_No.find("input").attr("value","false")):(rdoColourConsultation_Yes.attr({"aria-checked":"true",class:"Checkbox Checked Radio"}),rdoColourConsultation_Yes.find("input").attr("value","true")):"rdoColourConsultation_No"==e&&("false"!=rdoColourConsultation_Yes.attr("aria-checked")?(rdoColourConsultation_Yes.attr({"aria-checked":"false",class:"Checkbox Radio"}),rdoColourConsultation_Yes.find("input").attr("value","false")):(rdoColourConsultation_No.attr({"aria-checked":"true",class:"Checkbox Checked Radio"}),rdoColourConsultation_No.find("input").attr("value","true"))),E.hasClass("Hide")&&(E.fadeIn(function(){E.removeClass("Hide")}),o(),t()),$(document).change(),i()}),rdoColourConsultation_Yes_Rooms.add(rdoColourConsultation_No_Rooms).bind("click",function(){var o=$(this).attr("id");"rdoColourConsultation_Yes_Rooms"==o?"false"!=rdoColourConsultation_No_Rooms.attr("aria-checked")?(rdoColourConsultation_No_Rooms.attr({"aria-checked":"false",class:"Checkbox Radio"}),rdoColourConsultation_No_Rooms.find("input").attr("value","false")):(rdoColourConsultation_Yes_Rooms.attr({"aria-checked":"true",class:"Checkbox Checked Radio"}),rdoColourConsultation_Yes_Rooms.find("input").attr("value","true")):"rdoColourConsultation_No_Rooms"==o&&("false"!=rdoColourConsultation_Yes_Rooms.attr("aria-checked")?(rdoColourConsultation_Yes_Rooms.attr({"aria-checked":"false",class:"Checkbox Radio"}),rdoColourConsultation_Yes_Rooms.find("input").attr("value","false")):(rdoColourConsultation_No_Rooms.attr({"aria-checked":"true",class:"Checkbox Checked Radio"}),rdoColourConsultation_No_Rooms.find("input").attr("value","true"))),V.hasClass("Hide")&&V.fadeIn(function(){V.removeClass("Hide"),t()}),$(document).change(),i()}),rdoRushJob_Yes.add(rdoRushJob_No).bind("click",function(){var e=$(this).attr("id");"rdoRushJob_Yes"==e?"false"!=rdoRushJob_No.attr("aria-checked")?(rdoRushJob_No.attr({"aria-checked":"false",class:"Checkbox Radio"}),rdoRushJob_No.find("input").attr("value","false")):(rdoRushJob_Yes.attr({"aria-checked":"true",class:"Checkbox Checked Radio"}),rdoRushJob_Yes.find("input").attr("value","true")):"rdoRushJob_No"==e&&("false"!=rdoRushJob_Yes.attr("aria-checked")?(rdoRushJob_Yes.attr({"aria-checked":"false",class:"Checkbox Radio"}),rdoRushJob_Yes.find("input").attr("value","false")):(rdoRushJob_No.attr({"aria-checked":"true",class:"Checkbox Checked Radio"}),rdoRushJob_No.find("input").attr("value","true"))),j.hasClass("Hide")&&(j.fadeIn(function(){j.removeClass("Hide")}),o(),t()),i(),t(),$(document).change()}),rdoSanitization_Yes.add(rdoSanitization_No).bind("click",function(){var e=$(this).attr("id");"rdoSanitization_Yes"==e?"false"!=rdoSanitization_No.attr("aria-checked")?(rdoSanitization_No.attr({"aria-checked":"false",class:"Checkbox Radio"}),rdoSanitization_No.find("input").attr("value","false")):(rdoSanitization_Yes.attr({"aria-checked":"true",class:"Checkbox Checked Radio"}),rdoSanitization_Yes.find("input").attr("value","true")):"rdoSanitization_No"==e&&("false"!=rdoSanitization_Yes.attr("aria-checked")?(rdoSanitization_Yes.attr({"aria-checked":"false",class:"Checkbox Radio"}),rdoSanitization_Yes.find("input").attr("value","false")):(rdoSanitization_No.attr({"aria-checked":"true",class:"Checkbox Checked Radio"}),rdoSanitization_No.find("input").attr("value","true"))),L.hasClass("Hide")&&(L.fadeIn(function(){L.removeClass("Hide")}),o(),t()),i(),t(),$(document).change()}),rdoRushJob_Yes_Rooms.add(rdoRushJob_No_Rooms).bind("click",function(){var o=$(this).attr("id");"rdoRushJob_Yes_Rooms"==o?"false"!=rdoRushJob_No_Rooms.attr("aria-checked")?(rdoRushJob_No_Rooms.attr({"aria-checked":"false",class:"Checkbox Radio"}),rdoRushJob_No_Rooms.find("input").attr("value","false")):(rdoRushJob_Yes_Rooms.attr({"aria-checked":"true",class:"Checkbox Checked Radio"}),rdoRushJob_Yes_Rooms.find("input").attr("value","true")):"rdoRushJob_No_Rooms"==o&&("false"!=rdoRushJob_Yes_Rooms.attr("aria-checked")?(rdoRushJob_Yes_Rooms.attr({"aria-checked":"false",class:"Checkbox Radio"}),rdoRushJob_Yes_Rooms.find("input").attr("value","false")):(rdoRushJob_No_Rooms.attr({"aria-checked":"true",class:"Checkbox Checked Radio"}),rdoRushJob_No_Rooms.find("input").attr("value","true"))),e(),i(),t(),$(document).change()}),chkAccentWall.bind("click",function(){var e=$(this).attr("aria-checked");btnAccentWalls.reset(),"false"==e?I.fadeOut():(z.append(I),btnAccentWalls.selectIndex(0),I.fadeIn()),i(),t(),o(),$(document).change()}),chkCloset.bind("click",function(){var e=$(this).attr("aria-checked");btnClosets.reset(),"false"==e?W.fadeOut():(z.append(W),btnClosets.selectIndex(0),W.fadeIn()),i(),t(),o(),$(document).change()}),chk10FootCeiling.bind("click",function(){i(),$(document).change()}),chkBathroom.bind("click",function(){var e=$(this).attr("aria-checked");btnBathrooms.reset(),"false"==e?P.fadeOut():(z.append(P),btnBathrooms.selectIndex(0),P.fadeIn()),i(),t(),o(),$(document).change()}),chkDoorsTrim.bind("click",function(){var e=$(this).attr("aria-checked");J.reset(),"false"==e?H.fadeOut():(z.append(H),J.selectIndex(0),H.fadeIn()),i(),t(),o(),$(document).change()}),questionsContainer_wholeCondo.find(".SliderContainer input[type='number']").live("change mouseup",function(){n($(this).val()),i()}),questionsContainer_wholeCondo.find(".SliderContainer input[type='range']").live("input",function(){n($(this).val()),i()}),$(".ButtonPod .Option").bind("click",function(){var o=$(this),a=o.parent(),n=o.attr("data-index"),l=a.attr("data-last-selected-index");if(null!=n&&""!=n||(n=0),n!=l&&"disabled"!=o.attr("disabled")&&"disabled"!=a.attr("disabled")){switch(a.attr("id")){case"btnMode":0==n?(m_mode="whole-condo",questionsContainer_wholeCondo.removeClass("Hide"),questionsContainer_rooms.addClass("Hide"),O.fadeIn(function(){O.removeClass("Hide")})):(m_mode="rooms",questionsContainer_wholeCondo.addClass("Hide"),questionsContainer_rooms.removeClass("Hide"),Q.fadeIn(function(){Q.removeClass("Hide")}),rdoRushJob_No_Rooms.attr("data-value",m_FlexibilityDiscount),B.html(formatPercentage(m_FlexibilityDiscount)+" OFF"),rdoColourConsultation_Yes_Rooms.attr("data-value",m_ColourConsultation),_.html(formatCurrency(m_ColourConsultation)));break;case"btnNumberOfRooms":F.fadeIn(function(){F.removeClass("Hide")}),"true"!=rdoRushJob_No_Rooms.attr("aria-checked")&&"true"!=rdoRushJob_Yes_Rooms.attr("aria-checked")||e();break;case"btnSize":sldSize_WholeCondo.value(o.attr("data-square-footage")),n>0?chkTwoStory_Container.show():chkTwoStory_Container.hide(),U.fadeIn(function(){U.removeClass("Hide")}),null!=l&&"-1"!=l||sldSize_WholeCondo.enable(),r(n)}i(),t(),$(document).change()}o=a=n=l=null})}function r(t){t<0||t>4?(m.html("N/A"),h.html("N/A"),C.html("N/A"),b.html("N/A"),k.html("N/A"),v.html("N/A"),p.html("N/A"),R.html("N/A"),g.html("N/A"),x.html("N/A"),S.html("N/A"),w.html("N/A"),T.html("N/A"),N.html("N/A"),f.html("N/A"),rdoRefresh.attr("data-value","0.00"),rdoColourChange.attr("data-value","0.00"),rdoColourConsultation_Yes.attr("data-value","0.00"),rdoColourConsultation_No.attr("data-value","0.00"),chkBaseboards.attr("data-value","0.00"),chkDoorsTrim.attr("data-value","0.00"),chkCeiling.attr("data-value","0.00"),chkCrownMolding.attr("data-value","0.00"),chkAccentWall.attr("data-value","0.00"),chkCloset.attr("data-value","0.00"),chkDen.attr("data-value","0.00"),chkBathroom.attr("data-value","0.00"),chkTwoStory.attr("data-value","0.00"),rdoRushJob_No.add(rdoRushJob_No_Rooms).attr("data-value","0.00"),rdoRushJob_Yes.add(rdoRushJob_Yes_Rooms).attr("data-value","0.00"),chk10FootCeiling.attr("data-value","0.00"),rdoSanitization_Yes.attr("data-value","0.00"),rdoSanitization_No.attr("data-value","0.00"),chkTwoStory_Container.hide()):(m.html(formatCurrency(m_Base[t])),h.html(formatCurrency(m_ColourChange[t])),C.html(formatCurrency(m_ColourConsultation)),b.html(formatCurrency(m_Baseboards[t])),k.html(formatCurrency(m_DoorsTrim)+" each"),v.html(formatCurrency(m_Ceiling[t])),p.html(formatCurrency(m_CrownMolding[t])),R.html(formatCurrency(m_AccentWall)+" each"),g.html(formatCurrency(m_Closet)+" each"),x.html(formatCurrency(m_Den[t])),S.html(formatCurrency(m_Bathroom)+" each"),w.html(formatCurrency(m_TwoStory[t])),T.html(formatPercentage(m_FlexibilityDiscount)+" OFF"),N.html(formatCurrency(m_HighCeilings[t])),f.html(formatCurrency(m_Sanitation[t])),rdoRefresh.attr("data-value",m_Base[t]),rdoColourChange.attr("data-value",m_ColourChange[t]),rdoColourConsultation_Yes.attr("data-value",m_ColourConsultation),rdoColourConsultation_No.attr("data-value","0.00"),chkBaseboards.attr("data-value",m_Baseboards[t]),chkDoorsTrim.attr("data-value",m_DoorsTrim),chkCeiling.attr("data-value",m_Ceiling[t]),chkCrownMolding.attr("data-value",m_CrownMolding[t]),chkAccentWall.attr("data-value",m_AccentWall),chkCloset.attr("data-value",m_Closet),chkDen.attr("data-value",m_Den[t]),chkBathroom.attr("data-value",m_Bathroom),chkTwoStory.attr("data-value",m_TwoStory[t]),rdoRushJob_No.add(rdoRushJob_No_Rooms).attr("data-value",m_FlexibilityDiscount),rdoRushJob_Yes.add(rdoRushJob_Yes_Rooms).attr("data-value","0.00"),chk10FootCeiling.attr("data-value",m_HighCeilings[t]),rdoSanitization_Yes.attr("data-value",m_Sanitation[t]),rdoSanitization_No.attr("data-value","0.00"),0==t?chkTwoStory_Container.hide():chkTwoStory_Container.show()),i()}function n(t){var o=parseInt(Y.selectIndex()),e=t;base_sq_size=m_MaxSquareFootage[o],base_sq_cost=m_Base[o],per_sq=base_sq_cost/base_sq_size,premium=(e-base_sq_size)*per_sq,premium<0&&(premium=0),m.html(formatCurrency(m_Base[o]+premium)),h.html(formatCurrency(m_ColourChange[o]+premium))}function i(){function t(){if(_total=0,questionsContainer_wholeCondo.find(".Checked").each(function(){var t=$(this),o=t.attr("aria-checked");console.log("id: "+t.attr("id")+" | "+o+" | "+t.attr("data-value")),"true"==o&&("chkAccentWall"==t.attr("id")?_total+=Number(m_AccentWall*(Number(btnAccentWalls.attr("data-selected-index"))+1)):"chkBathroom"==t.attr("id")?_total+=Number(m_Bathroom*(Number(btnBathrooms.attr("data-selected-index"))+1)):"chkCloset"==t.attr("id")?_total+=Number(m_Closet*(Number(btnClosets.attr("data-selected-index"))+1)):"chkDoorsTrim"==t.attr("id")?_total+=Number(m_DoorsTrim*(Number(J.attr("data-selected-index"))+1)):"rdoRushJob_Yes"==t.attr("id")||"rdoRushJob_No"==t.attr("id")||(_total+=Number(t.attr("data-value"))))}),"whole-condo"==m_mode){var t=sldSize_WholeCondo.value(),o=m_MaxSquareFootage[a],e=m_Base[a],r=e/o,n=(t-o)*r;n>0&&(_total+=n)}var i=0;if(null!=m_selected_code&&"number"==typeof m_selected_code[1]&&(i=m_selected_code[1]),$("#rdoRushJob_No.Checked").length>0&&(i+=m_FlexibilityDiscount),i>0){var l=_total*(-i/100);u.html(formatCurrency(l)),_total+=l,K.fadeIn()}else K.fadeOut();D.html(m_AirmilesPer500Dollars*Math.floor(_total/500)+" Miles"),_total>0?c.html(formatCurrency(_total)):c.html("$0.00"),console.log("Calculate | "+m_mode+" | "+_total)}function o(){_total=0,V.add(F).find(".Checked").each(function(){var t=$(this),o=t.attr("aria-checked");"true"==o&&("rdoRushJob_Yes_Rooms"==t.attr("id")||"rdoRushJob_No_Rooms"==t.attr("id")||(_total+=Number(t.attr("data-value"))))}),questionsContainer_rooms.find("div[data-type='Room-Question']").each(function(){var t=$(this),o=t.attr("data-total-cost");o=""!=o&&null!=o?parseInt(o):0,_total+=o});var t=0;if(null!=m_selected_code&&"number"==typeof m_selected_code[1]&&(t=m_selected_code[1]),$("#rdoRushJob_No_Rooms.Checked").length>0&&(t+=m_FlexibilityDiscount),t>0){var o=_total*(-t/100);u.html(formatCurrency(o)),_total+=o,K.fadeIn()}else K.fadeOut();D.html(m_AirmilesPer500Dollars*Math.floor(_total/500)+" Miles"),_total>0?c.html(formatCurrency(_total)):c.html("$0.00")}var e=!1;if("whole-condo"==m_mode){var a=parseInt(Y.selectIndex());a>=0&&("true"==rdoRushJob_No.attr("aria-checked")||"true"==rdoRushJob_Yes.attr("aria-checked"))&&(e=!0)}else e=!0;"whole-condo"==m_mode&&e?t():"rooms"==m_mode&&e&&o()}var l=$(".Progressbar"),d=l.find(".Fill"),s=l.find(".Label"),c=$("#lblTotal"),u=$("#lblDiscount"),m=$("#lblRefresh_Cost"),h=$("#lblColourChange_Cost"),C=$("#lblColourConsultation_Cost"),_=$("#lblColourConsultation_Rooms_Cost"),f=$("#lblSanitization_Yes_Cost"),b=$("#lblBaseboards_Cost"),k=$("#lblDoorsTrim_Cost"),v=$("#lblCeiling_Cost"),p=$("#lblCrownMolding_Cost"),R=$("#lblAccentWall_Cost"),g=$("#lblCloset_Cost"),N=$("#lbl10FootCeiling_Cost"),x=$("#lblDen_Cost"),S=$("#lblBathroom_Cost"),w=$("#lblTwoStory_Cost"),T=$("#lblRushJob_No_Cost"),B=$("#lblRushJob_No_Rooms_Cost"),D=$("#lblTotalAirmiles"),A=$("#lblPromoCode"),q=$("#btnMode"),Y=$("#btnSize"),J=$("#btnDoors");btnNumberOfRooms=$("#btnNumberOfRooms"),sldSize_WholeCondo=$("#sldSize_WholeCondo"),btnClosets=$("#btnClosets"),btnAccentWalls=$("#btnAccentWalls"),btnBathrooms=$("#btnBathrooms"),btnSubmitQuote=$("#btnSubmitQuote"),btnApplyPromoCode=$("#btnApplyPromoCode"),rdoRefresh=$("#rdoRefresh"),rdoColourChange=$("#rdoColourChange"),rdoColourConsultation_Yes=$("#rdoColourConsultation_Yes"),rdoColourConsultation_No=$("#rdoColourConsultation_No"),rdoColourConsultation_Yes_Rooms=$("#rdoColourConsultation_Yes_Rooms"),rdoColourConsultation_No_Rooms=$("#rdoColourConsultation_No_Rooms"),rdoSanitization_No=$("#rdoSanitization_No"),rdoSanitization_Yes=$("#rdoSanitization_Yes"),rdoRushJob_No=$("#rdoRushJob_No"),rdoRushJob_Yes=$("#rdoRushJob_Yes"),rdoRushJob_No_Rooms=$("#rdoRushJob_No_Rooms"),rdoRushJob_Yes_Rooms=$("#rdoRushJob_Yes_Rooms"),chkBaseboards=$("#chkBaseboards"),chkDoorsTrim=$("#chkDoorsTrim"),chkCeiling=$("#chkCeiling"),chkCrownMolding=$("#chkCrownMolding"),chkBathroom=$("#chkBathroom"),chkCloset=$("#chkCloset"),chkAccentWall=$("#chkAccentWall"),chkDen=$("#chkDen"),chk10FootCeiling=$("#chk10FootCeiling"),chkTwoStory=$("#chkTwoStory"),chkTwoStory_Container=$("#chkTwoStory_Container"),txtPromoCode=$("#txtPromoCode");var z=$("#pnlPanelContainer"),I=$("#pnlAccentWalls"),W=$("#pnlClosets"),P=$("#pnlBathrooms"),M=$("#pnlColours"),F=$("#pnlColours_Rooms"),H=$("#pnlDoors"),Q=$("#pnlHowManyRooms"),O=$("#pnlHowLargeIsYourCondo"),L=$("#pnlWhatNeedsPainting"),U=$("#pnlWhatWouldYouLikeUsToDo"),j=$("#pnlSanitization"),E=$("#pnlRushJob"),V=$("#pnlRushJob_Rooms"),G=$("#pnlPromoCode"),K=$("#pnlDiscount"),X=$("div#QuestionContainer"),Z=X.find("div[data-type='Question']"),tt=Z.eq(0);questionsContainer_wholeCondo=X.find(">div[data-mode-visibility='whole-condo']"),questionsContainer_rooms=X.find(">div[data-mode-visibility='rooms']"),roomQuestionTemplateContainer=$("#RoomQuestionTemplateHTML"),roomQuestionTemplate=roomQuestionTemplateContainer.html(),roomQuestions=[],checkboxes=$(".Checkbox"),_total=0,_subtotal=0,roomQuestionTemplateContainer.remove(),o(),t(),e()}function StoreCalculatorData(){function t(){if($("#hdnRoomSize").val($("#btnSize").attr("data-selected-text")+" ("+$("#sldSize_WholeCondo input[type='range']").val()+" Sq. Ft.) Condo"),"whole-condo"==m_mode){var t=$("#sldSize_WholeCondo input[type='range']").val(),o=parseInt($("#btnSize").attr("data-selected-index")),r=m_MaxSquareFootage[o],l=m_Base[o],d=l/r;i=(t-r)*d,i<0&&(i=0),a+=i}questionsContainer_wholeCondo.find(".Checked").each(function(){var t=$(this),o=t.attr("aria-checked");if("true"==o)switch(t.attr("id")){case"chkAccentWall":var r=Number((Number($("#btnAccentWalls").attr("data-selected-index"))+1)*m_AccentWall);e+="<tr><td>"+Math.floor(r/m_AccentWall)+" "+t.attr("title")+"</td><td>"+formatCurrency(r)+"</td></tr>\n",a+=r;break;case"chkBathroom":r=Number((Number($("#btnBathrooms").attr("data-selected-index"))+1)*m_Bathroom);e+="<tr><td>"+Math.floor(r/m_Bathroom)+" "+t.attr("title")+"</td><td>"+formatCurrency(r)+"</td></tr>\n",a+=r;break;case"chkCloset":r=Number((Number($("#btnClosets").attr("data-selected-index"))+1)*m_Closet);e+="<tr><td>"+Math.floor(r/m_Closet)+" "+t.attr("title")+"</td><td>"+formatCurrency(r)+"</td></tr>\n",a+=r;break;case"chkDoorsTrim":r=Number((Number($("#btnDoors").attr("data-selected-index"))+1)*m_DoorsTrim);e+="<tr><td>"+Math.floor(r/m_DoorsTrim)+" "+t.attr("title")+"</td><td>"+formatCurrency(r)+"</td></tr>\n",a+=r;break;case"rdoColourConsultation_No":case"rdoSanitization_No":break;case"rdoRushJob_No":r=Number(t.attr("data-value"));n=r,e+="<tr><td>"+t.attr("title")+"</td><td>"+formatPercentage(r)+" Discount</td></tr>\n";break;case"rdoRushJob_Yes":r=Number(t.attr("data-value"));e+="<tr><td>"+t.attr("title")+"</td><td>Included</td></tr>\n",a+=r;break;case"rdoColourChange":case"rdoRefresh":r=Number(t.attr("data-value"));e+="<tr><td>"+t.attr("title")+"</td><td>"+formatCurrency(r+i)+"</td></tr>\n",a+=r;break;default:r=Number(t.attr("data-value"));e+="<tr><td>"+t.attr("title")+"</td><td>"+formatCurrency(r)+"</td></tr>\n",a+=r}})}function o(){$("#hdnRoomSize").val("Specific Rooms ("+$("#btnNumberOfRooms").attr("data-selected-text")+")"),$("#pnlRushJob_Rooms, #pnlColours_Rooms, #rdoColourConsultation_Yes_Rooms, #rdoColourConsultation_No_Rooms").find(".Checked").each(function(){var t=$(this),o=t.attr("aria-checked"),r=t.attr("id");if("true"==o)if("rdoRushJob_No_Rooms"==r){var i=Number(t.attr("data-value"));n=i,e+="<tr><td>"+t.attr("title")+"</td><td>"+formatPercentage(i)+" Discount</td></tr>\n"}else if("rdoRushJob_Yes_Rooms"==r)e+="<tr><td>"+t.attr("title")+"</td><td>Included</td> </tr>\n";else if("rdoColourConsultation_No_Rooms"==r);else if("rdoColourConsultation_Yes_Rooms"==r){i=Number(t.attr("data-value"));e+="<tr><td>"+t.attr("title")+"</td><td>"+formatCurrency(i)+"</td></tr>\n",a+=i}else{i=Number(t.attr("data-value"));e+="<tr><td>"+t.attr("title")+"</td><td>"+formatCurrency(i)+"</td></tr>\n"}}),$("div[data-type='Room-Question']").each(function(){var t=$(this),o=t.attr("data-total-cost");o=""!=o&&null!=o?parseInt(o):0,e+="<tr><td><b><i>"+t.attr("data-room-name")+" ("+t.find("input[type='range']").val()+" Sq. Ft.)</i></b></td><td><b><i>"+formatCurrency(o)+"</i></b></td></tr>",a+=o,t.find(".Checked").each(function(){var o=$(this),a=o.attr("aria-checked"),r=o.attr("id");if("true"==a)if(r.indexOf("chkDoorsTrim")>-1){var n=Number((Number(t.find("div[id^='btnDoors_Room']").attr("data-selected-index"))+1)*m_DoorsTrim);e+="<tr><td><i> • "+Math.floor(n/m_DoorsTrim)+" "+o.attr("title")+"</i></td><td><i>"+formatCurrency(n)+"</i></td></tr>\n"}else if(r.indexOf("rdoColourConsultation_No")>-1);else{n=Number(o.attr("data-value"));e+="<tr><td><i> • "+o.attr("title")+"</i></td><td><i>"+formatCurrency(n)+"</i></td></tr>\n"}})})}var e="",a=0,r=0,n=0,i=0;"whole-condo"==m_mode?t():"rooms"==m_mode&&o(),null!=m_selected_code&&"number"==typeof m_selected_code[1]&&(n+=m_selected_code[1],$("#hdnDiscountCode").val(m_selected_code[0])),n>0&&(r=a*(-n/100),$("#hdnDiscountAmount").val(formatCurrency(r)),a+=r),$("#hdnAirmilesEarned").val(m_AirmilesPer500Dollars*Math.floor(a/500)+" Miles"),$("#hdnOptionsTable").val(e),$("#hdnTotalCost").val(formatCurrency(a))}function formatCurrency(t){var o=!1;return t<0&&(o=!0,t=Math.abs(t)),(o?"-$":"$")+parseFloat(t,10).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,").toString()}function formatPercentage(t){return t+"%"}jQuery.fn.ButtonPod=function(){var t=$(this);try{var o=t.find(".Option");function e(t){var o=t.find(".Option-Selected");o.length>0&&a(o),o=null}function a(t){t.removeAttr("aria-checked").attr("class","Option")}function r(t){t.attr({"aria-checked":"true",class:"Option Option-Selected"})}o.bind("keydown",function(t){32!=t.keyCode&&13!=t.keyCode||$(this).trigger("click")}),o.bind("click",function(){var t=$(this),o=t.parent(),n=t.attr("data-index"),i=o.attr("data-selected-index");null!=n&&""!=n||(n=0),n!=i&&"disabled"!=t.attr("disabled")&&"disabled"!=o.attr("disabled")&&("true"==t.attr("aria-checked")?a(t):(e(o),r(t))),o.attr({"data-last-selected-index":i,"data-selected-index":n,"data-selected-text":t.attr("data-text"),"data-selected-value":t.attr("data-value")})}),t.selectIndex=function(e){return e<0?t.reset():e<o.length&&o.eq(0).click(),t.attr("data-selected-index")},t.reset=function(o){e(t),t.attr({"data-last-selected-index":-1,"data-selected-index":-1,"data-selected-text":"","data-selected-value":""})}}catch(t){}return t},jQuery.fn.SliderControl=function(){var t=this;try{var o,e=t.find("input[type='number']"),a=t.find("input[type='range']"),r=parseInt(a[0].min),n=parseInt(a[0].max);function i(){var t=e.val();null==t||null==t||""==t?(t=r,e.val(t)):t=parseInt(e.val()),t<r?e.add(a).val(r):t>n?e.add(a).val(n):a.val(t),l()}function l(){var t=a[0],o=parseInt(t.min),e=parseInt(t.max),r=parseInt(t.value);range=e-o,correctedStartValue=r-o,percent=100*correctedStartValue/range,t.style.background="linear-gradient(to right, #e58a1f 0%, #e58a1f "+percent+"%, #fff "+percent+"%, white 100%)"}e.add(a).val(r),e.bind("keyup",function(t){clearTimeout(o),o=setTimeout(i,500)}),e.bind("change mouseup",function(t){i()}),a.bind("input",function(){var t=parseInt(a.val());e.val(t),l()}),t.enable=function(){a.removeAttr("disabled"),e.removeAttr("disabled"),t.removeAttr("disabled"),t.css("opacity",1)},t.disable=function(){a.attr("disabled","disabled"),e.attr("disabled","disabled"),t.add(a,e).attr("disabled","disabled"),t.css("opacity",.4)},t.min=function(t){if(null!=t&&null!=t){t<0&&(t=0),a[0].min=r=t;var o=parseInt(e.val());o<r&&e.val(r),o>n&&e.val(n),l()}return r},t.max=function(t){if(null!=t&&null!=t){t<1&&(t=1),a[0].max=n=t;var o=parseInt(e.val());o<r&&e.val(r),o>n&&e.val(n),l()}return n},t.value=function(t){if(null!=t&&null!=t){var o=parseInt(t);o<r?o=r:o>n&&(o=n),a.add(e).val(o),l()}return a.val()},t.reset=function(o){e.add(a).val(r),t.attr({"data-value":r}),l()}}catch(t){console.log("failed to init SliderControl....e:\n"+t)}return t},jQuery.fn.RoomControl=function(o,e){var a,r=this,n=parseInt(r.attr("data-room-number"));try{r.find("#txtRoomName_Room_"+n),r.find("span[data-id='lblRoomName']:eq(0)");function i(){"false"==r.attr("data-q3-shown")&&(r.attr("data-q3-shown","true"),r.find("div[question-num='3']").removeClass("Hide"))}function l(){"false"==r.attr("data-q4-shown")&&(r.attr("data-q4-shown","true"),r.find("div[question-num='4']").removeClass("Hide"))}function d(){"false"==r.attr("data-q5-shown")&&(r.attr("data-q5-shown","true"),r.find("div[question-num='5']").removeClass("Hide"))}function s(){"true"==r.attr("data-q5-shown")&&(r.attr("data-q5-shown","false"),r.find("div[question-num='5']").addClass("Hide"))}function c(){var t=r.find("#sldSize_Room_"+n+" input[type='range']").val();r.find("span[data-id='lblRefresh_Cost_"+n+"']:eq(0)").html(formatCurrency(m_Base[4]*t)),r.find("span[data-id='lblColourChange_Cost_"+n+"']:eq(0)").html(formatCurrency(m_ColourChange[4]*t)),r.find("#lblBaseboards_Cost_"+n).html(formatCurrency(m_Baseboards[4]*t)),r.find("#lblDoorsTrim_Cost_"+n).html(formatCurrency(m_DoorsTrim)+" each"),r.find("#lblCeiling_Cost_"+n).html(formatCurrency(m_Ceiling[4]*t)),r.find("#lbl10FootCeiling_Cost_"+n).html(formatCurrency(m_HighCeilings[4]*t)),r.find("#lblCrownMolding_Cost_"+n).html(formatCurrency(m_CrownMolding[4]*t)),r.find("#lblAccentWall_Cost_"+n).html(formatCurrency(m_AccentWall)),r.find("#lblCloset_Cost_"+n).html(formatCurrency(m_Closet)),r.find("#rdoRefresh_Room_"+n).attr("data-value",m_Base[4]*t),r.find("#rdoColourChange_Room_"+n).attr("data-value",m_ColourChange[4]*t),r.find("#chkBaseboards_Room_"+n).attr("data-value",m_Baseboards[4]*t),r.find("#chkDoorsTrim_Room_"+n).attr("data-value",m_DoorsTrim),r.find("#chkCeiling_Room_"+n).attr("data-value",m_Ceiling[4]*t),r.find("#chk10FootCeiling_Room_"+n).attr("data-value",m_HighCeilings[4]*t),r.find("#chkCrownMolding_Room_"+n).attr("data-value",m_CrownMolding[4]*t),r.find("#chkAccentWall_Room_"+n).attr("data-value",m_AccentWall),r.find("#chkCloset_Room_"+n).attr("data-value",m_Closet),u()}function u(){var t=0;r.find(".Checked").each(function(){var o=$(this),e=o.attr("aria-checked");"true"==e&&(o.attr("id")=="chkDoorsTrim_Room_"+n?t+=Number(m_DoorsTrim*(Number(r.find("#btnDoors_Room_"+n).attr("data-selected-index"))+1)):t+=Number(o.attr("data-value")))}),console.log("Room Total: "+formatCurrency(t)),r.attr("data-total-cost",t),null!=o&&o()}sldrRoomsize=r.find("#sldSize_Room_"+n).SliderControl(),checkboxes=r.find(".Checkbox"),lblColourChange_Cost=r.find("span[data-id='lblColourChange_Cost_"+n+"']:eq(0)"),lblRefresh_Cost=r.find("span[data-id='lblRefresh_Cost_"+n+"']:eq(0)"),r.find("#txtRoomName_Room_"+n).bind("focus",function(){this.focus(),
this.setSelectionRange(0,this.value.length)}).bind("keyup change",function(t){""!=this.value&&" "!=this.value||(this.value="Room"),r.find("span[data-id='lblRoomName']:eq(0)").html(this.value),r.attr("data-room-name",this.value)}),r.find("#sldSize_Room_"+n).find("input[type='number']").bind("keyup",function(){clearTimeout(a),a=setTimeout(c,500),i()}).bind("change mouseup",function(){c(),i()}),r.find("#sldSize_Room_"+n).find("input[type='range']").bind("input",function(){c(),i()}),r.find("#txtRoomName_Room_"+n).val("Room "+n),r.find("span[data-id='lblRoomName']:eq(0)").html("Room "+n),r.attr("data-room-name","Room "+n),r.find("#btnDoors_Room_"+n).ButtonPod().selectIndex(0),r.find("#btnDoors_Room_"+n+".ButtonPod .Option").bind("click",function(){var o=$(this),e=o.parent(),a=o.attr("data-index"),n=e.attr("data-last-selected-index");null!=a&&""!=a||(a=0),a!=n&&"disabled"!=o.attr("disabled")&&(u(),r.change()),t=e=a=n=null}),r.find(".CheckboxContainer h4").bind("click",function(){var t=$(this).parent(),o=t.find(".Checkbox");o.trigger("click")}),r.find(".Checkbox").bind("keydown",function(t){32!=t.keyCode&&13!=t.keyCode||$(this).trigger("click")}),r.find(".Checkbox").bind("click",function(){var t=$(this),o=t.attr("aria-checked"),e=t.find("input");"false"==o?(t.hasClass("Radio")?t.attr({"aria-checked":"true",class:"Checkbox Radio Checked"}):t.attr({"aria-checked":"true",class:"Checkbox Checked"}),e.attr("value","validated")):(t.hasClass("Radio")?t.attr({"aria-checked":"false",class:"Checkbox Radio"}):t.attr({"aria-checked":"false",class:"Checkbox"}),e.attr("value","false")),u(),r.change()}),r.find("#chkDoorsTrim_Room_"+n).bind("click",function(){var t=$(this),o=t.attr("aria-checked");"true"==o?d():s()}),r.find("#rdoRefresh_Room_"+n).add(r.find("#rdoColourChange_Room_"+n)).bind("click",function(){var t=$(this).attr("id");t.indexOf("rdoRefresh_Room_")>-1?"false"!=r.find("#rdoColourChange_Room_"+n).attr("aria-checked")?(r.find("#rdoColourChange_Room_"+n).attr({"aria-checked":"false",class:"Checkbox Radio"}),r.find("#rdoColourChange_Room_"+n).find("input").attr("value","false")):(r.find("#rdoRefresh_Room_"+n).attr({"aria-checked":"true",class:"Checkbox Checked Radio"}),r.find("#rdoRefresh_Room_"+n).find("input").attr("value","true")):t.indexOf("rdoColourChange_Room_")>-1&&("false"!=r.find("#rdoRefresh_Room_"+n).attr("aria-checked")?(r.find("#rdoRefresh_Room_"+n).attr({"aria-checked":"false",class:"Checkbox Radio"}),r.find("#rdoRefresh_Room_"+n).find("input").attr("value","false")):(r.find("#rdoColourChange_Room_"+n).attr({"aria-checked":"true",class:"Checkbox Checked Radio"}),r.find("#rdoColourChange_Room_"+n).find("input").attr("value","true"))),"false"==r.attr("data-is-complete")&&r.attr("data-is-complete","true"),null!=e&&e.length>n&&e[n].removeClass("Hide"),u(),l(),r.change()}),r.reset=function(t){r.attr({"data-last-selected-index":-1,"data-selected-index":-1,"data-selected-text":"","data-selected-value":""}),return_t}}catch(t){console.log("ERROR: RoomControl....e:\n"+t)}return r};